/* ===== 1. 主题变量 ===== */
:root {
  /* 边框 */
  --border-light: rgba(0, 0, 0, 0.15);
  --border-dark:  rgba(255,255,255,0.1);
  /* 主色 */
  --primary-light: #1e90ff;
  --primary-dark:  #3b82f6;
  --primary-light-rgb: 30,144,255;
  --primary-dark-rgb:  59,130,246;
  /* 背景 & 文字 */
  --bg-light: #ffffff;
  --bg-dark:  #0f1115;
  --sidebar-light: #f5f6f8;
  --sidebar-dark:  #14171d;
  --text-light: #1f1f1f;
  --text-dark:  #e2e8f0;
  /* 其它 */
  --ui-scale: 1;
}
body.light-theme {
  --border-color: var(--border-light);
  --primary: var(--primary-light);
  --primary-rgb: var(--primary-light-rgb);
  --bg-color: var(--bg-light);
  --sidebar-bg: var(--sidebar-light);
  --text-color: var(--text-light);
}
body.dark-theme {
  --border-color: var(--border-dark);
  --primary: var(--primary-dark);
  --primary-rgb: var(--primary-dark-rgb);
  --bg-color: var(--bg-dark);
  --sidebar-bg: var(--sidebar-dark);
  --text-color: var(--text-dark);
}

/* ===== 2. Reset ===== */
*,*::before,*::after{box-sizing:border-box;}
html,body{margin:0;padding:0;height:100%;overflow:hidden;font-family:'Roboto',sans-serif;background:var(--bg-color);color:var(--text-color);zoom:var(--ui-scale);-webkit-tap-highlight-color:transparent;}
a{color:inherit;text-decoration:none;}
button{font-family:inherit;cursor:pointer;}

/* ===== 3. 布局容器 ===== */
.container{display:flex;height:100%;width:100%;}

/* ===== 4. 侧边栏 ===== */
.sidebar{
  width:240px;
  background:var(--sidebar-bg);
  border-right:1px solid var(--border-color);
  display:flex;flex-direction:column;
}
.logo{font-size:1.4rem;padding:20px;text-align:center;}
.new-btn{
  margin:0 16px 12px;
  padding:10px 0;
  width:auto;
  background:var(--primary);
  color:#fff;
  border:none;border-radius:6px;
  font-size:0.95rem;
}
.new-btn:hover{background:rgba(var(--primary-rgb),0.9);}

.conv-nav{flex:1;overflow-y:auto;margin:0;padding:0;list-style:none;}
.conv-nav li{
  padding:12px 18px;
  border-radius:8px;
  white-space:nowrap;
  text-overflow:ellipsis;
  overflow:hidden;
  position:relative;
  transition:background 0.15s ease;
  margin: 0 16px;
  
}
.conv-nav li:hover{background:rgba(var(--primary-rgb),0.12);}


.sidebar-footer .settings-btn {
  font-size: 1rem;          /* 字体稍大 */
  padding: 0.75em 1em;      /* 内边距加大 */
  min-width: 100px;         /* 最小宽度保证易点 */
  justify-content: center;  /* 如果是 flex 布局，文字居中 */
}
.settings-area {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 16px;
}
.setting-item {
  display: flex;
  align-items: center;
  flex-wrap: nowrap;
}
.setting-item label {
  margin-right: auto;   /* 左侧自适应扩展 */
}
.setting-item input,
.setting-item select,
.setting-item button {
  margin-left: 8px;     /* 各控件间留白 */
  flex-shrink: 0;
}


/* ===== 5. 主区 ===== */
.main-area{flex:1;display:flex;flex-direction:column;position:relative;min-width:0;}

/* 5-1 头部 */
.chat-header{
  display:flex;align-items:center;gap:12px;
  padding:12px 16px;
  border-bottom:1px solid var(--border-color);
  background:var(--bg-color);
  min-height:48px;
  flex-shrink:0; /* 确保头部高度固定 */
}
.chat-header h1{margin:0;font-size:1.1rem;font-weight:500;}

/* 5-2 聊天内容 - 修改 */
.chat-area{
  flex:1;
  display:flex;
  flex-direction:column;
  overflow:hidden; /* 确保 .chat-area 本身不出现滚动条，而是让 .messages 滚动 */
  min-height:0;   /* 允许内部的 .messages 正确滚动 */
}


/* —— 新增：归档按钮样式 —— */
#archive-current-btn {
  position: absolute !important;
  top: 8px !important;
  /* 让它紧挨删除按钮左侧 — 删除是 right:12px，这里设置一个合适的偏移 */
  right: 80px !important;        /* 你可以根据按钮宽度微调这个值 */
  padding: 6px 12px !important;
  min-width: 55px; /* 新增：设置一个最小宽度，例如 60px，根据实际效果调整 */
  text-align: center; /* 新增：确保文字在按钮内居中 */
  background: #fff !important;
  color: #000 !important;
  border: 1px solid #ccc !important;
  border-radius: 4px !important;
  font-size: 0.9rem !important;
  cursor: pointer !important;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1) !important;
  transition: background 0.2s ease, border-color 0.2s ease !important;
}
#archive-current-btn:hover {
  background: #f7f7f7 !important;
  border-color: #bbb !important;
}

/* ===== 聊天消息相关 CSS - 修改开始 ===== */

/* ===== 聊天消息相关 CSS - 统一的 messages 定义 ===== */

.messages {
  flex: 1;                     /* 占据父容器 .chat-area 中除去 .input-area 的剩余空间 */
  overflow-y: auto;            /* 当内容超出高度时显示垂直滚动条 */
  /* padding: 24px 24px 75px; */ /* 旧的 padding，底部空间过大 */
  padding: 24px;               /* 四周统一内边距，底部不再需要为绝对定位的输入框留白 */
  display: flex;
  flex-direction: column;
  gap: 14px;                   /* .message-wrapper 之间的间距 */
  width: 100%;
}

.message {
  max-width: 100%; 
  margin: 0; /* 确保没有额外的外边距 */
  padding: 8px 12px;
  border-radius: 16px;
  line-height: 1.5;
  font-size: 0.95rem;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  word-break: break-word;
}

/* 单条消息的包裹层 */
.message-wrapper {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  width: fit-content;
  max-width: 85%; /* 或者你之前设置的，比如 80% 或 75% */
}

/* 用户消息的包裹层：整体靠右 */
.user-message-wrapper {
  align-self: flex-end;
}

/* 助手消息的包裹层：整体靠左 */
.assistant-message-wrapper {
  align-self: flex-start;
}

/* 消息气泡 (.message) 的样式 */
.message {
  max-width: 100%; 
  margin: 0; 
  padding: 8px 12px;
  border-radius: 16px;
  line-height: 1.5;
  font-size: 0.95rem;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
  word-break: break-word; /* 将 word-break 移到这里 */
}

/* ... 你其他的 .message.user, .message.assistant, .delete-message-btn 等样式 ... */

/* 用户气泡颜色 */
.message.user {
  background-color: var(--primary); /* 在新版 CSS 中应为 var(--primary-color) */
  color: white;
  text-align: left; 
}

/* 助手气泡颜色 */
.message.assistant {
  /* background-color: var(--bg-secondary); /* 假设你定义了这个变量 */
  /* color: var(--text-color); */
  /* 以下是你原有的深色主题下的助手气泡样式，浅色主题会覆盖 */
  background-color: rgba(255,255,255,0.06);
  color: var(--text-color);
  text-align: left;
}
body.light-theme .message.assistant{
  background:#f0f2f5;
  color:var(--text-color);
  border:1px solid rgba(0,0,0,0.06);
}
/* ... (其他 message 样式如 pre, code, text p 等保持) ... */


/* --- 删除单条消息按钮的样式 (修改后) --- */
.delete-message-btn {
  background: transparent;
  border: none;
  color: #888; 
  cursor: pointer;
  font-size: 1.2em; 
  padding: 0;    
  line-height: 1;
  
  /* --- 默认隐藏 --- */
  opacity: 0;
  visibility: hidden;
  /* --- 结束默认隐藏 --- */
  
  transition: opacity 0.2s ease, visibility 0s linear 0.2s, color 0.2s ease; 
  /* 解释:
     - opacity 过渡 0.2s
     - visibility 不立即过渡 (0s)，但在 opacity 过渡完成后 (linear 0.2s) 改变，
       这样可以避免在元素透明但仍可见时发生意外交互。
       或者更简单地，只过渡 opacity，然后用 display: none/block，但 display 不支持 transition。
       对于简单的显隐，只控制 opacity 配合 visibility 效果通常不错。
  */
  
  width: 20px;   
  height: 20px;  
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 4px; 
  margin-top: 4px; 
}

/* 当鼠标悬停在整个消息包裹层上时，显示删除按钮 */
.message-wrapper:hover .delete-message-btn {
  opacity: 0.7; /* 或者 1，如果你希望完全不透明 */
  visibility: visible;
  transition-delay: 0s; /* 确保悬停时 visibility 立即生效 */
}

/* 当鼠标直接悬停在删除按钮上时 (可选，可以进一步增强反馈) */
.delete-message-btn:hover {
  color: #ff4d4d; 
  opacity: 1; /* 确保在直接悬停时完全不透明 */
}

/* ===== 聊天消息相关 CSS - 修改结束 ===== */

.message pre,.message code{font-family:monospace;}
.message pre{background:rgba(0,0,0,0.15);padding:8px;border-radius:6px;overflow-x:auto;}

/* style.css */

/* --- 输入区域 .input-area 的样式优化 --- */
.input-area {
  flex-shrink: 0; 
  padding: 10px 15px; 
  background: var(--bg-color);
  border-top: 1px solid var(--border-color);
  display: flex;
  flex-direction: row; 
  align-items: center; 
  gap: 10px; 
}

/* 模型选择下拉框的样式 */
.input-area select#model {
  /* appearance, padding, border, background-image 等保持你之前的设置 */
  /* (你需要确保你用于美化原生select的 appearance: none; 和 background-image 规则仍然存在于你的CSS文件中其他地方，或者也合并到这里) */
  appearance: none; /* 假设你需要这个来移除原生样式 */
  -webkit-appearance: none; /* 针对 Webkit 浏览器 */
  cursor: pointer; /* 确保有指针手势 */
  font-family: inherit; /* 继承字体 */
  font-size: 0.90rem;       /* 略微减小字体，例如从 0.9rem 改为 0.85rem */
  padding-top: 0;         /* 减小上下内边距 */
  padding-bottom: 0;      /* 减小上下内边距 */
  padding-left: 10px;     /* 保持或调整左内边距 */
  padding-right: 30px;    /* 保持或调整右内边距（为箭头图标留空间） */
  height: auto; 
  padding-top: 8px; 
  padding-bottom: 8px; 
  /* --- 结束修改 --- */

  border-radius: 4px; /* 可以尝试比其他控件略小的圆角，显得更精致 */
  border: 1px solid var(--border-color);
  background-color: var(--bg-color);
  color: var(--text-color);
  flex-shrink: 0; 
  align-self: flex-start; 
  margin-top: 0; 
   /* 确保箭头图标的样式也在这里，或者在另一个针对 select#model 的规则中 */
  background-repeat: no-repeat;
  background-position: right 8px center; /* 根据 padding-right 调整箭头位置 */
  background-image: url("data:image/svg+xml;charset=UTF-8,<svg width='10' height='6' viewBox='0 0 10 6' xmlns='http://www.w3.org/2000/svg'><path d='M0 0l5 6 5-6z' fill='%23999'/></svg>");
  background-size: 10px 6px; /* 调整箭头图标大小 */
  transition: border-color .2s, box-shadow .2s; /* 保留过渡效果 */
}

/* 确保你的主题特定箭头颜色仍然生效 */
body.dark-theme .input-area select#model {
  background-image: url("data:image/svg+xml;charset=UTF-8,<svg width='10' height='6' viewBox='0 0 10 6' xmlns='http://www.w3.org/2000/svg'><path d='M0 0l5 6 5-6z' fill='rgba(255,255,255,0.5)'/></svg>"); /* 深色主题箭头 */
  /* ... 其他深色主题 select 样式 ... */
}


/* style.css */

.input-area textarea {
  flex-grow: 1; 
  padding: 8px 10px;
  font-size: 0.95rem;
  border: 1px solid var(--border-color);
  border-radius: 6px;
  background: var(--bg-color);
  color: var(--text-color);
  resize: none; /* 禁止用户手动拖拽调整大小，因为我们将用JS控制 */
  width: 100%; 
  box-sizing: border-box; 
  max-height: 200px; /* 最大高度限制 */
  min-height: 60px;
  line-height: 1.6;
  overflow-y: hidden; /* 默认隐藏滚动条，当内容超出max-height时，JS会改为auto */
                      /* 或者直接设为 auto，但配合JS动态调整可能hidden更好初始状态 */
  
  height: auto; /* 让 JS 可以先重置它 */
}

.input-area textarea:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 2px rgba(var(--primary-rgb), 0.2);
}


/* 发送按钮的样式 */
.input-area button#send-btn {
  padding: 0 20px; /* 左右内边距 */
  height: 42px;    /* 固定高度 */
  background:var(--primary);
  color:#fff;
  border:none;
  border-radius:6px;
  font-size:0.95rem;
  flex-shrink: 0; /* 防止按钮被父级 flex 容器压缩 */
  
  /* --- 新增/确保以下属性 --- */
  white-space: nowrap; /* 强制文本不换行 */
  display: inline-flex; /* 或者 flex, 让内部文本能更好地对齐 */
  align-items: center;  /* 垂直居中文本 */
  justify-content: center; /* 水平居中文本 (如果按钮比文本宽) */
  min-width: fit-content; /* 让按钮的最小宽度至少是其内容的宽度 */
                          /* 或者设置一个具体的 min-width，例如：min-width: 70px; */
}

.input-area button#send-btn:hover { 
  background:rgba(var(--primary-rgb),0.9);
}

/* 模型切换下拉靠左，保持层级 */
.model-select select{z-index:1000;background:var(--bg-color);color:var(--text-color);border:1px solid var(--border-color);border-radius:6px;padding:6px;}

/* ===== 7. 危险按钮 ===== */
button.danger,#delete-current-btn{background:#e53e3e!important;color:#fff!important;}
button.danger:hover,#delete-current-btn:hover{background:#c53030!important;}

/* ===== 8. 滚动条美化 ===== */
.messages::-webkit-scrollbar{width:8px;}
.messages::-webkit-scrollbar-thumb{background:rgba(0,0,0,0.25);border-radius:4px;}
.sidebar::-webkit-scrollbar{width:6px;}
.sidebar::-webkit-scrollbar-thumb{background:rgba(0,0,0,0.2);border-radius:4px;}

/* ===== 9. 响应式 ===== */
@media(max-width:768px){
  .sidebar{display:none;}
  .container{flex-direction:column;}
  .chat-header{padding:10px;}
  .new-btn{margin:12px;}
}

/* ===== 10. Helper 类 ===== */
.hide{display:none!important;}
.full-width{width:100%!important;}
.text-center{text-align:center!important;}

/* —— 补丁开始 —— */

/* 1. 美化侧栏“设置”⚙ 按钮 */
.settings-btn {
  display: block;                       /* 从 inline-flex 改为块级 */
  margin: 0 20px 15px;                  /* 同侧边栏按钮左右间距 */
  width: calc(100% - 40px);             /* 扣除左右各 20px 外边距后撑满宽度 */
  height: 48px;                         /* 固定高度，可按需调整 */
  padding: 0 16px;                      /* 左右 padding 保证文字有呼吸感 */
  background: #10a37f;
  color: #fff;
  font-weight: 500;
  border: none;
  border-radius: 6px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
  text-align: center;                   /* 文字水平居中 */
  line-height: center;                    /* 文字垂直居中 */
}
.settings-btn:hover {
  filter: brightness(0.9);
}

.settings-btn:hover {
  filter: brightness(0.9);
}

/* 2. 侧栏选中项和按钮同宽（修正版） */
.new-btn {
  margin: 0 20px 15px;      /* 与列表项左右一致 */
}

/* 先清除所有默认列表缩进 */
.conv-nav ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

/* 列表项统一 */
.conv-nav li {
  display: block;
  margin: 0 20px 5px;
  padding: 10px 16px;
  border-radius: 8px;
  cursor: pointer;
}

/* hover 高亮 */
.conv-nav li:hover {
  background: rgba(var(--primary-rgb), 0.12);
}




/* 箭头图标（Data URI SVG）*/
.input-area select#model {
  background-image: url("data:image/svg+xml;charset=UTF-8,<svg width='10' height='6' viewBox='0 0 10 6' xmlns='http://www.w3.org/2000/svg'><path d='M0 0l5 6 5-6z' fill='%23999'/></svg>");
}

/* —— 浅色主题 —— */
body.light-theme .input-area select#model {
  background-color: #fff;
  color: #333;
  border: 1px solid #ccc;
}
body.light-theme .input-area select#model:focus {
  outline: none;
  border-color: #40a9ff;
  box-shadow: 0 0 0 2px rgba(24,144,255,0.2);
}
body.light-theme .input-area select#model option {
  background: #fff;
  color: #333;
}
body.light-theme .input-area select#model option:hover {
  background-color: #f5f5f5;
}

/* —— 深色主题 —— */
body.dark-theme .input-area select#model {
  background-color: #2e2f3a;
  color: #ececf1;
  border: 1px solid #555;
}
body.dark-theme .input-area select#model:focus {
  outline: none;
  border-color: #409cff;
  box-shadow: 0 0 0 2px rgba(64,156,255,0.2);
}
body.dark-theme .input-area select#model option {
  background: #2e2f3a;
  color: #ececf1;
}
body.dark-theme .input-area select#model option:hover {
  background-color: #3a3b45;
}


/* 3. 优化模型选择下拉样式 */
.input-area select#model {
  /* ...前面那些 appearance、padding 等不变... */

  /* 把箭头图标放到正确的 selector 里 */
  background-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdo dD0iOCIgdmlld0JveD0iMCAwIDEyIDgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAw L3N2ZyI+PHBvbHlnb24gcG9pbnRzPSIwIDAgNiA4IDEyIDAgMCAwIiBmaWxsPSIjY2NjIi8+ PC9zdmc+");
  background-repeat: no-repeat;
  background-position: right 8px center;
  background-size: 12px 8px;
}


/* 4. 设置界面排版调整 */
.settings-area {
  padding: 24px 32px;
  display: flex;
  flex-direction: column;
  gap: 24px;
}
.settings-area h2 {
  font-size: 1.6rem;
  margin-bottom: 16px;
  font-weight: 600;
}
.setting-item {
  display: flex;
  align-items: center;
  gap: 16px;
  flex-wrap: wrap;
}
.setting-item label {
  flex: 0 0 200px;             /* 固定标签宽度 */
  font-weight: 500;
}
.setting-item input[type="password"],
.setting-item select {
  flex: 1;
  min-width: 200px;
}
.setting-item button {
  flex: 0 0 auto;
  padding: 8px 20px;
  font-size: 0.95rem;
  border-radius: 6px;
}

/* 5. 精简输入区按钮和下拉整体对齐 */
.input-area {
  padding: 8px 20px;           /* 减少上下内边距 */
}


/* —— 补丁结束 —— */

/* ===== 覆盖：删除按钮样式 ===== */
#delete-current-btn {
  position: absolute !important;
  top: 8px !important;
  right: 12px !important;
  padding: 6px 12px !important;
  min-width: 55px; /* 新增：设置与归档按钮相同的最小宽度 */
  text-align: center; /* 新增：确保文字在按钮内居中 */
  background: #e53e3e !important;
  color: #fff !important;
  border: 1px solid transparent !important;
  border-radius: 4px !important;
  font-size: 0.9rem !important;
  cursor: pointer !important;
  box-shadow: 0 2px 4px rgba(0,0,0,0.2) !important;
  transition: background 0.2s ease !important;
}
#delete-current-btn:hover {
  background: #c53030 !important;
}

/* 清除助手机泡内 <p> 的默认 margin */
.message .text p {
  margin: 0;
}
/* 隐藏所有空的 <p> */
.message .text p:empty {
  display: none !important;
}

body.light-theme ::-webkit-scrollbar {
  width: 8px;
}
body.light-theme ::-webkit-scrollbar-track {
  background: #f0f0f0;
  border-radius: 4px;
}
body.light-theme ::-webkit-scrollbar-thumb {
  background-color: #c0c0c0;
  border-radius: 4px;
  border: 2px solid #f0f0f0;
}
body.light-theme ::-webkit-scrollbar-thumb:hover {
  background-color: #999;
}
body.light-theme {
  scrollbar-color: #bbb #f0f0f0;
  scrollbar-width: thin;
}

body.dark-theme ::-webkit-scrollbar {
  width: 8px;
}
body.dark-theme ::-webkit-scrollbar-track {
  background: #1f1f1f;
  border-radius: 4px;
}
body.dark-theme ::-webkit-scrollbar-thumb {
  background-color: #444;
  border-radius: 4px;
  border: 2px solid #1f1f1f;
}
body.dark-theme ::-webkit-scrollbar-thumb:hover {
  background-color: #666;
}
body.dark-theme {
  scrollbar-color: #444 #1f1f1f;
  scrollbar-width: thin;
}

/* 用户气泡保留换行 */
.message.user .text {
  white-space: pre-wrap !important;
}
/* loading 占位样式 */
.message.assistant.loading {
  opacity: 0.6;
  font-style: italic;
  display: inline-block; /* 让其表现为行内块，宽度由内容决定 */
  width: auto;           /* 明确宽度自适应 */
  max-width: fit-content;/* 最大宽度也由内容决定，或者设置一个较小的值，如 200px */
  align-self: flex-start;/* 确保它在 .messages 容器中是左对齐的 */
}

/* 清除助手机泡内 <p> 的默认 margin */
.message .text p {
  margin: 0;
}
/* 隐藏所有真正空的 p（以防万一） */
.message .text p:empty {
  display: none !important;
}

/* 聊天框中所有链接显示为蓝色，并加下划线 */
.message .text a {
  color: #0066cc !important;
  text-decoration: underline !important;
}

/* 鼠标移上去时加深一下色 */
.message .text a:hover {
  color: #004999 !important;
}

/* 聊天消息中的图片自适应宽度、保持纵横比 */
.message .text img {
  display: block;             /* 单独一行，自动撑开容器 */
  max-width: 100% !important; /* 最宽不超过气泡宽度 */
  height: auto !important;    /* 高度按比例自适应 */
  margin: 8px 0;              /* 上下加点间距 */
  border-radius: 4px;         /* 圆润点儿，可选 */
}

#edit-title-btn {
  font-size: 0.9em;
  vertical-align: middle;
}
#edit-title-btn:hover {
  opacity: 0.7;
}

/* —— 美化对话标题编辑框 —— */
#chat-title-input {
  background-color: rgba(255,255,255,0.05); /* 轻微透明黑 */
  border: 1px solid #555;                  /* 中灰边框 */
  border-radius: 4px;                      /* 圆角 */
  padding: 4px 8px;                        /* 内边距 */
  color: #fff;                             /* 白色字体 */
  font-weight: 500;                        /* 稍粗 */
  font-family: inherit;                    /* 继承节奏 */
  outline: none;                           /* 去掉默认 outline */
  min-width: 120px;                        /* 最小宽度 */
  font-size: 1.00rem; /* 例如，设置为 1.1rem，比聊天头部的 h1 (1.1rem) 略大或一致 */
}

/* 焦点时高亮边框 */
#chat-title-input:focus {
  border-color: #3399ff;
  box-shadow: 0 0 4px rgba(51,153,255,0.6);
}
/* 针对两种主题分别优化编辑框可见性 */
body.light-theme #chat-title-input {
  /* 浅色主题下用深色半透明底、深灰边框 */
  background-color: rgba(0, 0, 0, 0.05);
  border: 1px solid rgba(0, 0, 0, 0.2);
  color: var(--text-light);
}

body.dark-theme #chat-title-input {
  /* 深色主题下用亮色半透明底、中灰边框 */
  background-color: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: var(--text-dark);
}

/* 容器保持 inline-flex，让按钮靠右显示 */
.scale-frame {
  display: inline-flex;
  margin-left: 8px;
}

/* 按钮组 */
.scale-frame .scale-options {
  display: flex;
}

/* 各按钮：固定宽度、高度，单行文字 */
.scale-frame .scale-options button {
  flex: none;               /* 不等分，使用固定宽度 */
  width: 50px;              /* 根据文字长度调整 */
  padding: 6px 0;           /* 垂直内边距，水平由 width 决定 */
  margin: 0 2px;            /* 每个按钮左右留一点间距 */
  border: 1px solid var(--border-color);
  background: var(--bg-secondary);
  color: var(--text-primary);
  text-align: center;
  font-size: 0.9em;
  line-height: 1;           /* 让文字垂直居中 */
  cursor: pointer;
  border-radius: 4px;       /* 全体一致圆角 */
}

/* 选中态仅改变边框颜色，不要背景高亮 */
.scale-frame .scale-options button.active {
  border-color: var(--primary-color);
  color: var(--primary-color);
}

/* 去掉之前的 hover 背景高亮，仅加个边框反馈 */
.scale-frame .scale-options button:hover {
  border-color: var(--primary-color);
}

/* 把 ghost 隐掉，直接移动原始 li */
.sortable-ghost {
  opacity: 0 !important;
}

/* 被拖住的 li 加个样式提示一下 */
.sortable-chosen {
  background: rgba(var(--primary-rgb), 0.2) !important;
  border: 1px dashed rgba(var(--primary-rgb), 0.5) !important;
}


/* 让所有列表项相对定位，便于 ::before 绝对定位画线 */
#conversation-list li {
  position: relative;        /* 新增：建立定位上下文 */
  display: block;
  margin: 0 20px 5px;
  padding: 10px 16px;
  border-radius: 8px;
  cursor: pointer;
}

#conversation-list li:hover {
  background: rgba(var(--primary-rgb), 0.12);  /* 自行调整 alpha 值，看着舒服就好 */
  color: inherit;                             /* 保持文字原色 */
}

/* 拖拽时在空位处的元素上画一条蓝色分隔线 */
#conversation-list li.sortable-ghost::before {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  top: 0;           /* 如果想在上方画线，就 top:0 */
  height: 2px;      /* 线的粗细 */
  background: var(--primary-color);
}

.setting-item button {
  min-width: 80px;
}

/* 分隔线 */
.archive-divider {
  text-align: center;
  color: var(--text-secondary);
  font-size: 0.8em;
  margin: 8px 0;
}

/* 已归档项样式 */
.conversation-item.archived .title {
  opacity: 0.6;
}


/* 1. 先把旧版 btn-delete / btn-archive（如果残留）彻底隐藏 */
#conversation-list li .btn-delete,
#conversation-list li .btn-archive {
  display: none !important;
}

/* 2. 针对我们自己插入的 .del 按钮：默认不显示 */
#conversation-list li .del {
  position: absolute;        /* 新增：脱离文档流 */
  right: 16px;               /* 距离右侧 16px */
  top: 50%;                  /* 垂直中心线 */
  transform: translateY(-50%);/* 垂直居中 */
  
  display: none;             /* 默认不显示 */
  opacity: 0;
  visibility: hidden;
  
  background: transparent !important;
  border: none !important;
  color: red !important;
  font-size: 0.9rem !important;
  cursor: pointer !important;
}

#conversation-list li:hover .del {
  display: inline-block !important;
  opacity: 1 !important;
  visibility: visible !important;
}

/* 二级菜单默认收起 */
.archived-list {
  display: none;
  margin-left: 16px;
  padding-left: 0;
  list-style: none;
}

/* 点击“已归档”时展开 */
.archive-toggle.expanded + .archived-list {
  display: block;
}

/* 样式美化 */
.archive-toggle {
  cursor: pointer;
  font-weight: bold;
  padding: 8px 16px;
  user-select: none;
}
.archive-toggle::before {
  content: '▶';
  display: inline-block;
  margin-right: 6px;
  transform: rotate(0deg);
  transition: transform 0.2s;
}
.archive-toggle.expanded::before {
  transform: rotate(90deg);
}

/* —— 活动项高亮 —— */
#conversation-list li.active {
  background: var(--primary) !important;
  color: #fff !important;
}

/* 🧠 思考过程块整体容器 */
.reasoning-block {
  margin-bottom: 1em;
}

/* 标签：思考过程 */
.reasoning-label {
  font-weight: bold;
  margin-bottom: 0.5em;
}

/* 内容区域：设为灰色字体 */
.reasoning-content {
  color: #aaa;
  white-space: pre-wrap;
  font-size: 0.95em;
  line-height: 1.6;
}

/* 分隔线 */
.reasoning-sep {
  margin-top: 1em;
  margin-bottom: 1em;
  border: none;
  border-top: 1px solid #555;
}
.model-note {
  margin-top: 0.5em;
  font-size: 0.85em;
  color: #888;
  text-align: left;
  font-style: italic;
}


/* 代码块复制按钮 */
.text pre {
  position: relative; /* 建立定位上下文 */
}

.text pre .copy-btn {
  position: absolute;
  top: 4px;
  right: 8px;
  display: none;
  background: rgba(0, 0, 0, 0.5);
  color: #fff;
  border: none;
  border-radius: 3px;
  padding: 2px 6px;
  font-size: 0.75rem;
  cursor: pointer;
  transition: background 0.2s;
}

.text pre .copy-btn:hover {
  background: rgba(0,0,0,0.7);
}

/* 悬浮时显示 */
.text pre:hover .copy-btn {
  display: block;
}

/* 浅色模式下的 copy 按钮 */
body.light-theme .text pre .copy-btn {
  background: rgba(255,255,255,0.7) !important;
  color: #333 !important;
}
body.light-theme .text pre .copy-btn:hover {
  background: rgba(255,255,255,0.9) !important;
}

body.light-theme .reasoning-content {
  color: #777; /* 具体可以根据需要微调 */
}

/* —— API Key 组 —— */
.settings-area .api-key-group {
  display: flex;
  align-items: center;
  margin-bottom: 0.75em;
}
.settings-area .api-key-group label {
  width: 140px;
  flex-shrink: 0;
  font-size: 0.95rem;
  color: var(--text-color);
}
.settings-area .api-key-group select,
.settings-area .api-key-group input {
  flex: 1;
  padding: 6px 10px;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  background: var(--bg-color);
  color: var(--text-color);
  font-size: 0.95rem;
}
.settings-area .api-key-group select:focus,
.settings-area .api-key-group input:focus {
  outline: none;
  border-color: var(--primary);
}


/* —— “保存当前 API Key” 蓝色按钮 —— */
#save-api-btn {
  display: inline-block;               /* 和其他按钮保持一致 */
  margin: 0 20px 15px;                 /* 左右间距与其他按钮相同 */
  padding: 10px 22px;                  /* 内边距一致 */
  background: var(--primary) !important;
  color: #fff !important;
  border: none !important;
  border-radius: 6px;
  font-size: 0.95rem;
  cursor: pointer;
  transition: background 0.2s ease;
  text-align: center;
}
#save-api-btn:hover {
  background: rgba(var(--primary-rgb), 0.9) !important;
}

/* ————— 代码块复制按钮 ————— */
.text pre {
  position: relative;
}
.text pre .copy-btn {
  position: absolute;
  top: 4px;
  right: 8px;
  display: none;
  background: rgba(0,0,0,0.5);
  color: #fff;
  border: none;
  border-radius: 3px;
  padding: 2px 6px;
  font-size: 0.75rem;
  cursor: pointer;
  transition: background .2s;
}
.text pre:hover .copy-btn {
  display: block;
}
/* 浅色主题下按钮配色 */
body.light-theme .text pre .copy-btn {
  background: rgba(255,255,255,0.7);
  color: #333;
}
body.light-theme .text pre .copy-btn:hover {
  background: rgba(255,255,255,0.9);
}

/* ===== 思考过程块的样式 (已调整为思考过程在回复上方) ===== */

.reasoning-block {
  /* margin-bottom: 12px; */ /* 这个是之前思考过程在下面时的间距，现在它在上面 */
  margin-top: 0;          /* 如果是气泡内第一个元素，通常不需要上边距 */
  margin-bottom: 10px;    /* 与下方的正式回复内容之间的间距 */

  /* padding-top: 10px; */  /* 如果是第一个元素，可能不需要顶部内边距，或者由气泡整体padding控制 */
  padding-top: 0;         /* 通常设为0，让标签和内容自然排列 */
  padding-bottom: 10px;   /* 思考过程内容与下方分隔线/主要回复的间距 */

  /* 分隔线应该在思考过程的底部，与主要回复内容分隔 */
  border-top: none;       /* 移除可能存在的上边框 */
  border-bottom: 1px dashed rgba(128, 128, 128, 0.3); /* 分隔线在底部 */

  font-size: 0.9em;
  line-height: 1.5;
}

/* 如果 reasoning-block 是消息气泡内的第一个可见子元素，
   并且消息气泡本身有 padding-top，那么 reasoning-block 可能不需要额外的 margin-top。
   这个 :first-child 选择器确保如果它是第一个，其顶部没有多余的边距。
*/
.message > .reasoning-block:first-child {
  margin-top: 0;
}
/* (或者，如果你不希望它有任何上边距，无论是否第一个，都可以在 .reasoning-block 中直接设置 margin-top: 0;) */


.reasoning-label {
  font-weight: bold;
  margin-bottom: 6px;
  /* 颜色将由主题特定样式覆盖 */
}

.reasoning-content { /* 这是 <pre> 标签 */
  white-space: pre-wrap;
  word-break: break-all; /* 对于非常长的无空格字符串，可以考虑 break-word 可能更柔和 */
  overflow-wrap: break-word;
  padding: 8px 10px; /* 调整内边距，使其看起来更紧凑 */
  border-radius: 4px;    /* 给 pre 标签也加个圆角 */
  max-height: 200px;     /* 调整最大高度 */
  overflow-y: auto;
  /* 背景和文字颜色将由主题特定样式覆盖 */
  font-size: 0.95em; /* 让 pre 内的文字大小与 reasoning-block 的 font-size 相对独立或一致 */
}

/* --- 浅色主题下的思考过程样式 --- */
body.light-theme .reasoning-block {
  /* border-top-color: rgba(0, 0, 0, 0.15); /* 改为 border-bottom-color */
  border-bottom-color: rgba(0, 0, 0, 0.1); /* 浅色主题下的底部线条颜色 */
}
body.light-theme .reasoning-label {
  color: #444; /* 标签颜色加深一点 */
}
body.light-theme .reasoning-content {
  background-color: #f8f9fa; /* 非常浅的灰色 */
  color: #333;
  border: 1px solid #e9ecef;
}
/* 浅色主题下思考过程滚动条 */
body.light-theme .reasoning-content::-webkit-scrollbar { width: 6px; }
body.light-theme .reasoning-content::-webkit-scrollbar-thumb { background-color: #ced4da; border-radius: 3px; }
body.light-theme .reasoning-content { scrollbar-color: #ced4da #f8f9fa; scrollbar-width: thin; }


/* --- 深色主题下的思考过程样式 --- */
body.dark-theme .reasoning-block {
  /* border-top-color: rgba(255, 255, 255, 0.15); /* 改为 border-bottom-color */
  border-bottom-color: rgba(255, 255, 255, 0.2); /* 深色主题下的底部线条颜色 */
}
body.dark-theme .reasoning-label {
  color: #ccc;
}
body.dark-theme .reasoning-content {
  background-color: rgba(255, 255, 255, 0.05); /* 深色背景 */
  color: #ddd;
  border: 1px solid rgba(255, 255, 255, 0.15);
}
/* 深色主题下思考过程滚动条 */
body.dark-theme .reasoning-content::-webkit-scrollbar { width: 6px; }
body.dark-theme .reasoning-content::-webkit-scrollbar-thumb { background-color: #444; border-radius: 3px; }
body.dark-theme .reasoning-content { scrollbar-color: #444 rgba(255, 255, 255, 0.05); scrollbar-width: thin; }


/*
   不再需要这两个选择器了，因为我们直接在 .reasoning-block 设置了 margin-bottom
   来控制与下方 .text 的间距。
   而且 .text 相对于气泡顶部的间距，如果上面没有 reasoning-block，
   则由气泡的 padding-top 控制；如果上面有 reasoning-block，
   则由 reasoning-block 的 margin-bottom 和自身的 margin-top (如果有的话) 控制。
*/
/*
.message .reasoning-block:first-child {
    margin-top: 0;
}

.message .reasoning-block + .text {
    margin-top: 10px;
}
*/

/* 如果需要，可以给 .text (主要回复内容) 一个默认的 margin-top，
   或者当它前面是 .reasoning-block 时才给它 margin-top。
   但通常 .reasoning-block 的 margin-bottom 已经处理了间距。
   如果 .reasoning-block 不存在，.text 应该是气泡内的第一个主要内容元素。
*/
.message > .text:first-child { /* 如果 .text 是气泡内第一个子元素 (即没有思考过程) */
  margin-top: 0; /* 通常不需要上边距，由气泡的 padding 控制 */
}
.message > .reasoning-block + .text { /* 如果 .text 前面是 .reasoning-block */
  margin-top: 10px; /* 确保主要回复和上面的思考过程之间有明确的间距 */
}


/* ===== 结束 思考过程块的样式 ===== */

/* style.css */

/* ... 其他样式 ... */

.settings-area {
  /* display: flex; (这个由 JS 控制，当显示时会设为 flex) */
  flex-direction: column; /* 保持内容垂直排列 */
  gap: 20px;             /* 设置项之间的间距，根据你的喜好调整 */
  padding: 24px 32px;    /* 内边距 */

  /* --- 核心修改，确保滚动 --- */
  flex: 1;                /* 让 .settings-area 占据 .main-area 中的剩余垂直空间 */
  overflow-y: auto;       /* 当内容高度超过 .settings-area 高度时，显示垂直滚动条 */
  min-height: 0;          /* 在 flex 布局中，这有助于确保 overflow 生效 */
  /* --- 结束核心修改 --- */
}

/* 你可以保留或调整 settings-area h2 和 setting-item 的样式 */
.settings-area h2 {
  font-size: 1.6rem;
  margin-top: 0; /* 通常标题顶部不需要额外margin，由padding控制 */
  margin-bottom: 16px;
  font-weight: 600;
}
.setting-item {
  display: flex;
  align-items: center;
  gap: 16px;
  flex-wrap: wrap; /* 如果一行放不下，允许换行 */
}
.setting-item label {
  flex: 0 0 200px; 
  font-weight: 500;
}
.setting-item input[type="password"],
.setting-item select,
.setting-item input[type="text"] /* 如果有其他类型输入框 */ {
  flex: 1;
  min-width: 200px;
}
.setting-item button {
  flex-shrink: 0; /* 防止按钮被压缩 */
  /* padding: 8px 20px; (这些通常由通用按钮样式或特定按钮ID/类控制) */
  /* font-size: 0.95rem; */
  /* border-radius: 6px; */
}

#back-to-chat-btn {
  background: none;
  border: none;
  padding: 8px 12px;
  color: var(--primary); /* 使用主题色作为文字/图标颜色 */
  font-size: 1rem;     /* 或者根据你的图标大小调整 */
  font-weight: 500;
  cursor: pointer;
  display: inline-flex; /* 使图标和文字能良好对齐 */
  align-items: center;
  gap: 6px; /* 图标和文字之间的间距 */
  border-radius: 4px;
  transition: background-color 0.2s ease, color 0.2s ease;
}

#back-to-chat-btn:hover {
  background-color: rgba(var(--primary-rgb), 0.1); /* 悬停时轻微背景高亮 */
  color: var(--primary-dark); /* 如果有定义深一点的主题色 */
}

/* 假设你用一个伪元素来做箭头图标 */
#back-to-chat-btn::before {
  content: '←'; /* 或者使用 SVG 图标作为 background-image */
  font-weight: bold;
  margin-right: 4px; /* 如果文字在右边 */
}

.setting-item input[type="range"] {
  flex-grow: 1; /* 让滑块占据更多可用空间 */
  margin-left: 10px;
  /* 你可能需要一些特定于浏览器的前缀来美化滑块轨道和滑块本身 */
}

/* style.css */

/* --- Temperature 滑块美化 --- */
.setting-item input[type="range"]#temperature-slider {
  /* 1. 重置外观，移除大部分原生样式 */
  -webkit-appearance: none; /* Safari an Chrome */
  -moz-appearance: none;    /* Firefox */
  appearance: none;         /* 标准属性 */
  
  width: 100%; /* 让滑块轨道尽可能宽 */
  height: 20px; /* 整个控件的高度，主要是为了给手柄留出垂直空间 */
  background: transparent; /* 移除 input 元素本身的背景 */
  cursor: pointer;
  outline: none; /* 移除焦点时的默认轮廓 */
  margin-left: 10px; /* 与标签的间距 */
}

/* --- WebKit/Blink 浏览器 (Chrome, Edge, Safari, Opera) --- */
.setting-item input[type="range"]#temperature-slider::-webkit-slider-runnable-track {
  width: 100%;
  height: 6px; /* 轨道的高度 */
  cursor: pointer;
  background: #555; /* 轨道背景色 (深灰色) */
  border-radius: 3px; /* 轨道圆角 */
  /* border: 1px solid #333; /* 可选：轨道边框 */
}

.setting-item input[type="range"]#temperature-slider::-webkit-slider-thumb {
  -webkit-appearance: none; /* 必须，移除原生手柄样式 */
  appearance: none;
  
  border: 2px solid var(--primary-dark); /* 手柄边框颜色 (你的主题蓝色) */
  height: 16px;       /* 手柄高度 */
  width: 16px;        /* 手柄宽度 */
  border-radius: 50%; /* 使手柄为圆形 */
  background: #fff;   /* 手柄背景色 (白色，与蓝色边框形成对比) */
  cursor: pointer;
  margin-top: -5px;   /* 关键：调整手柄相对于轨道的垂直位置 */
                      /* 计算方式: (轨道高度 - 手柄高度) / 2 
                         例如: (6px - 16px) / 2 = -5px 
                         如果手柄有边框，边框宽度也需要考虑进去
                         (6px - (16px + 2*2px_border)) / 2 + 2px_border 类似这样，具体要微调
                      */
  box-shadow: 0 0 2px rgba(0,0,0,0.5); /* 可选：手柄阴影 */
}

/* --- Gecko 浏览器 (Firefox) --- */
.setting-item input[type="range"]#temperature-slider::-moz-range-track {
  width: 100%;
  height: 6px;
  cursor: pointer;
  background: #555;
  border-radius: 3px;
  /* border: 1px solid #333; */
}

.setting-item input[type="range"]#temperature-slider::-moz-range-thumb {
  border: 2px solid var(--primary-dark);
  height: 12px; /* Firefox 下手柄的 border 会算在 height/width 之外，所以这里用 16px - 2*2px */
  width: 12px;
  border-radius: 50%;
  background: #fff;
  cursor: pointer;
  box-shadow: 0 0 2px rgba(0,0,0,0.5);
}

/* 可选：Firefox 焦点样式 (移除默认虚线框) */
.setting-item input[type="range"]#temperature-slider::-moz-focus-outer {
  border: 0;
}

/* --- 与标签和数值显示的对齐 --- */
.setting-item label[for="temperature-slider"] {
  /* 你可能需要调整 label 的样式使其与其他设置项的 label 对齐 */
  white-space: nowrap; /* 防止标签换行 */
}
#temperature-value {
  display: inline-block;
  min-width: 2.8em; /* 调整宽度以容纳 "0.0" 到 "2.0" */
  text-align: left; /* 或者 right，根据你的偏好 */
  font-weight: bold;
  margin-left: 8px;
}

.messages {
  /* ... 你现有的 .messages 样式 ... */
  position: relative; /* 如果需要用绝对定位来居中提示，虽然 flex 更方便 */
  display: flex;
  flex-direction: column;
  /* align-items: center; /* 如果希望提示块水平居中 */
  /* justify-content: center; /* 如果希望提示块垂直居中 (当 messages 高度固定时) */
}

/* 新增：空聊天状态的占位提示样式 */
.empty-chat-placeholder {
  /* 使用 flex 在 .messages 容器中居中这个提示 */
  display: flex; /* 设为 flex 以便内部的 p 元素可以更容易地对齐 */
  flex-direction: column;
  justify-content: center; /* 垂直居中 */
  align-items: center;   /* 水平居中 */
  text-align: center;
  
  /* 让它占据 .messages 的可用空间，这样才能有效居中 */
  flex-grow: 1; 
  
  color: var(--text-secondary, #888); /* 使用次要文字颜色 */
  font-size: 1rem;
  padding: 20px;
  user-select: none; /* 防止用户意外选中这段文字 */
}

.empty-chat-placeholder p {
  margin: 0;
}


/* --- 模型管理区域 --- */
.model-management-area {
  flex: 1;
  display: flex;
  flex-direction: column;
  padding: 20px;
  overflow-y: auto; /* 如果内容过多，允许滚动 */
}

.model-management-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
  padding-bottom: 10px;
  border-bottom: 1px solid var(--border-color);
}

.model-management-header h2 {
  margin: 0;
  font-size: 1.5rem;
}

.model-management-controls button {
  margin-left: 10px;
}

.model-list-editor {
  display: flex;
  flex-direction: column;
  gap: 20px; /* 模型组之间的间距 */
}

.model-group-editor {
  border: 1px solid var(--border-color);
  border-radius: 8px;
  padding: 15px;
  background-color: rgba(var(--primary-rgb), 0.03); /* 轻微背景色区分 */
}
body.dark-theme .model-group-editor {
  background-color: rgba(255,255,255, 0.03);
}


.model-group-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px;
}

.model-group-header h4 {
  margin: 0;
  font-size: 1.1rem;
  cursor: grab; /* 提示可以拖拽组 */
}
.model-group-header input.group-label-editor {
  font-size: 1.1rem;
  font-weight: bold;
  padding: 4px 8px;
  border: 1px dashed var(--border-color);
  background: transparent;
  color: var(--text-color);
}


.model-group-options {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 10px; /* 模型项之间的间距 */
}

.model-option-editor {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px;
  border: 1px solid rgba(var(--border-color), 0.5);
  border-radius: 6px;
  background-color: var(--bg-color);
  cursor: grab; /* 提示可以拖拽项 */
}

.model-option-editor .details {
  flex-grow: 1;
  font-size: 0.9rem;
}
.model-option-editor .details strong {
  display: block;
  margin-bottom: 3px;
}
.model-option-editor .details span {
  color: #888;
  font-size: 0.85rem;
}
body.dark-theme .model-option-editor .details span {
  color: #aaa;
}


.model-option-editor .actions button {
  padding: 5px 8px;
  font-size: 0.8rem;
  margin-left: 5px;
  background-color: var(--sidebar-bg); /* 使用侧边栏背景色作为按钮底色 */
  border: 1px solid var(--border-color);
  color: var(--text-color);
}
.model-option-editor .actions button.danger-text {
  color: #e53e3e;
}
.model-option-editor .actions button:hover {
  filter: brightness(0.9);
}
body.dark-theme .model-option-editor .actions button:hover {
  filter: brightness(1.2);
}


/* --- 模态对话框样式 --- */
.modal {
  position: fixed;
  z-index: 1001; /* 比其他内容高 */
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  background-color: rgba(0,0,0,0.6); /* 半透明背景 */
  display: flex; /* 用于垂直居中 */
  align-items: center;
  justify-content: center;
}

.modal-content {
  background-color: var(--bg-color);
  margin: auto;
  padding: 25px;
  border: 1px solid var(--border-color);
  border-radius: 8px;
  width: 80%;
  max-width: 500px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  position: relative;
}

.close-modal-btn {
  color: #aaa;
  position: absolute;
  top: 10px;
  right: 15px;
  font-size: 28px;
  font-weight: bold;
  cursor: pointer;
}
.close-modal-btn:hover,
.close-modal-btn:focus {
  color: var(--text-color);
  text-decoration: none;
}

#model-form .form-group {
  margin-bottom: 15px;
}
#model-form label {
  display: block;
  margin-bottom: 5px;
  font-weight: 500;
}
#model-form input[type="text"] {
  width: calc(100% - 20px); /* 减去 padding */
  padding: 8px 10px;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  background-color: var(--bg-color);
  color: var(--text-color);
  font-size: 0.95rem;
}
#model-form input[type="text"]:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 2px rgba(var(--primary-rgb), 0.2);
}
#model-form small {
  display: block;
  font-size: 0.8rem;
  color: #777;
  margin-top: 3px;
}
body.dark-theme #model-form small {
  color: #aaa;
}

#model-form .form-actions {
  margin-top: 20px;
  text-align: right;
}
#model-form .form-actions button {
  margin-left: 10px;
}
button.primary-action {
    background-color: var(--primary) !important;
    color: white !important;
}
button.primary-action:hover {
    filter: brightness(0.9);
}
button.secondary {
  background-color: #6c757d;
  color: white;
}
button.secondary:hover {
  background-color: #5a6268;
}

/* style.css */

/* --- 模型管理界面头部控制按钮 --- */
.model-management-controls button {
  padding: 8px 16px; /* 增加内边距 */
  font-size: 0.9rem;
  border-radius: 5px; /* 圆角 */
  border: 1px solid var(--border-color); /* 统一边框 */
  background-color: var(--sidebar-bg); /* 使用侧边栏背景色，与深色主题协调 */
  color: var(--text-color);
  cursor: pointer;
  transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease; /* 过渡效果 */
  margin-left: 10px; /* 保持按钮间距 */
}

/* 鼠标悬停效果 */
.model-management-controls button:hover {
  border-color: var(--primary); /* 悬停时边框变主题色 */
  background-color: rgba(var(--primary-rgb), 0.1); /* 轻微主题色背景 */
}

/* 主要操作按钮 (例如 "保存更改") */
.model-management-controls button.primary-action {
  background-color: var(--primary);
  color: white;
  border-color: var(--primary);
}

.model-management-controls button.primary-action:hover {
  background-color: rgba(var(--primary-rgb), 0.85); /* 主题色变深一点 */
  border-color: rgba(var(--primary-rgb), 0.85);
}

/* style.css */

/* --- 模型组头部按钮 (例如 "删除组") --- */
.model-group-header button {
  padding: 5px 10px;
  font-size: 0.85rem;
  border-radius: 4px;
  border: 1px solid transparent; /* 默认透明边框 */
  background-color: transparent; /* 默认透明背景 */
  color: #adb5bd; /* 默认浅灰色文字，不那么突出 */
  cursor: pointer;
  transition: background-color 0.2s ease, color 0.2s ease;
}
body.light-theme .model-group-header button { /* 浅色主题下的颜色 */
    color: #6c757d;
}


.model-group-header button:hover {
  background-color: rgba(255, 255, 255, 0.05); /* 悬停时轻微背景 */
  color: var(--text-color); /* 悬停时文字变亮 */
}
body.light-theme .model-group-header button:hover {
  background-color: rgba(0, 0, 0, 0.05);
}


/* 如果有明确的 "删除组" 按钮，可以给它特定的危险色 */
.model-group-header button.danger-text { /* 您之前已有这个类 */
  color: #e53e3e; /* 危险红色 */
}

.model-group-header button.danger-text:hover {
  background-color: rgba(229, 62, 62, 0.1); /* 红色背景的浅色版 */
  color: #c53030; /* 悬停时红色加深 */
}

/* style.css */

/* --- 模型选项内的操作按钮 (编辑, 删除) --- */
.model-option-editor .actions button {
  padding: 6px 12px; /* 调整内边距 */
  font-size: 0.85rem; /* 字体大小 */
  border-radius: 4px;
  border: 1px solid var(--border-color);
  background-color: rgba(var(--primary-rgb), 0.08); /* 非常浅的主题色背景 */
  color: var(--text-color);
  cursor: pointer;
  transition: background-color 0.2s ease, border-color 0.2s ease;
  margin-left: 8px; /* 按钮间距 */
}
body.light-theme .model-option-editor .actions button {
  background-color: #f0f2f5; /* 浅色主题下的背景 */
  border: 1px solid #d9d9d9;
}

.model-option-editor .actions button:hover {
  border-color: var(--primary);
  background-color: rgba(var(--primary-rgb), 0.15); /* 悬停时背景加深 */
}
body.light-theme .model-option-editor .actions button:hover {
  border-color: var(--primary);
  background-color: #e6f7ff; /* 浅色主题悬停背景 */
}


/* 删除按钮的特定样式 */
.model-option-editor .actions button.danger-text { /* 您之前已有这个类 */
  background-color: rgba(229, 62, 62, 0.1); /* 默认就给一点红色背景 */
  border-color: rgba(229, 62, 62, 0.3);
  color: #e53e3e;
}
body.light-theme .model-option-editor .actions button.danger-text {
  background-color: #fff1f0;
  border-color: #ffccc7;
}


.model-option-editor .actions button.danger-text:hover {
  background-color: rgba(229, 62, 62, 0.2);
  border-color: rgba(229, 62, 62, 0.5);
  color: #c53030; /* 悬停时红色加深 */
}
body.light-theme .model-option-editor .actions button.danger-text:hover {
  background-color: #ffccc7;
  border-color: #ffa39e;
}

/* style.css */

/* --- 模型表单模态对话框 - 动作按钮 --- */
#model-form .form-actions {
  margin-top: 25px; /* 增加与上方表单项的间距 */
  text-align: right; /* 按钮默认靠右对齐 */
  display: flex; /* 使用 flex 布局以便更好地控制按钮间距和对齐 */
  justify-content: flex-end; /* 确保按钮靠右 */
  gap: 10px; /* 按钮之间的间距 */
}

#model-form .form-actions button {
  padding: 10px 20px; /* 统一的、更舒适的内边距 */
  font-size: 0.95rem; /* 字体大小 */
  border-radius: 5px; /* 圆角 */
  border: 1px solid var(--border-color);
  cursor: pointer;
  transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease, box-shadow 0.2s ease;
  font-weight: 500; /* 字体稍粗一些 */
}

/* "保存模型" 按钮 (主要操作按钮) */
#model-form .form-actions button#save-model-detail-btn {
  background-color: var(--primary); /* 主题色背景 */
  color: white; /* 白色文字 */
  border-color: var(--primary); /* 主题色边框 */
}

#model-form .form-actions button#save-model-detail-btn:hover {
  background-color: rgba(var(--primary-rgb), 0.85); /* 悬停时主题色变深 */
  border-color: rgba(var(--primary-rgb), 0.85);
  box-shadow: 0 2px 8px rgba(var(--primary-rgb), 0.3); /* 悬停时轻微阴影 */
}

/* "取消" 按钮 (次要/中性操作按钮) */
#model-form .form-actions button#cancel-model-detail-btn {
  background-color: var(--sidebar-bg); /* 使用与侧边栏或次要元素一致的背景色 */
  color: var(--text-color); /* 文本颜色 */
  border-color: var(--border-color); /* 边框颜色 */
}
/* 针对浅色主题的取消按钮优化 */
body.light-theme #model-form .form-actions button#cancel-model-detail-btn {
    background-color: #f0f2f5; /* 浅灰色背景 */
    border-color: #d9d9d9;
    color: #555; /* 深灰色文字 */
}


#model-form .form-actions button#cancel-model-detail-btn:hover {
  background-color: rgba(var(--primary-rgb), 0.1); /* 悬停时轻微主题色背景 */
  border-color: var(--primary); /* 悬停时边框变主题色 */
  color: var(--primary); /* 悬停时文字变主题色 */
}
/* 针对浅色主题的取消按钮悬停优化 */
body.light-theme #model-form .form-actions button#cancel-model-detail-btn:hover {
    background-color: #e6f7ff; /* 浅蓝色背景 */
    border-color: var(--primary);
    color: var(--primary);
}

/* style.css - 检查 .container 和 .main-area 的样式 */
.container {
  display: flex; /* 确保是 flex 布局 */
  height: 100%;
  width: 100%;
}

.sidebar {
  width: 240px; /* 或者你设置的宽度 */
  /* display: flex; */ /* 它的 display 由 JS 控制 */
  /* ... 其他样式 ... */
}

.main-area {
  flex: 1; /* 当侧边栏隐藏时，它会占据所有剩余空间 */
  display: flex;
  flex-direction: column;
  /* ... 其他样式 ... */
}